<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Paintcont</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="/css/AdminCss/vertical-layout-light/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="/css/products.css">
<link rel="icon" type="image/x-icon" href="/images/ours-logos.jpeg">
<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>

  <link rel="icon" href="/images/user/FAV LOGO.png" type="image/x-icon">

</head>

<body>
  <div class="container-scroller">
    <!-- nav bar -->
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
        <a class="navbar-brand brand-logo mr-5" href="index.html"><img src="/images/user/logo-removebg-preview.png"
            class="mr-2" alt="logo" /></a>
        <a class="navbar-brand brand-logo-mini" href="index.html"><img src="#" alt="logo" /></a>
      </div>
    </nav>

    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link " href="/admin/Dashboard">
              <span class="menu-title">Dashboard</span>
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link " href="/admin/user">
              <span class="menu-title">User manager</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link"  href="/admin/Products" >
              <span class="menu-title">Products</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/orders">
              <span class="menu-title">Orders</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/banners" >
              <span class="menu-title">Banner</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/category" >
              <span class="menu-title">Category</span>
            </a>
            <div class="collapse" id="icons">
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/coupons">
              <span class="menu-title">Coupons</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/logout" >
              <span class="menu-title">logout</span>
            </a>
          </li>
        </ul>
      </nav>
      <!-- partial -->
      <div class="container" style="margin-top: 5em;">
            <div class="container-fluid bg-light mt-3" style="width: 93%; border-radius: 8px; align-items: center; display: block;">
              <!-- For demo purpose -->
        
              <div class="container-fluid bg-light mt-3" style="width: 93%; border-radius: 8px; align-items: center; display: block;">
                <!-- For demo purpose -->
          
          
          
                <div class=" m-5 row justify-content-between">
                  <div class="filter-box mt-1 p-2 w-100  col-md-3 "
                      >
          
                      <div class=" row d-flex">
                        
                        <div class="row d-flex w-100 justify-content-around">
                            <div class="w-25 d-flex justify-content-start align-items-center">
                                <h5>Select Sales Period:</h5>
                            </div>
          
                              <div class="w-25 d-flex justify-content-center align-items-center ">
                                  <div>
                                    <label for="start_date">From:</label><br>
                                    <input type="date" class="form-control" id="start_date" placeholder="" name="start_date">
                                  </div>
                              </div>
                              <div class="w-25 d-flex justify-content-center align-items-center">
                                  <div>
                                    <label for="end_date">To:</label><br>
                                    <input type="date" class="form-control" id="end_date" placeholder="" name="end_date">
                                  </div>
                              </div>
                              <div class=" w-25 d-flex justify-content-end  align-items-center ">
                                  <div><button type="button" class="btn btn-dark px-1 " id="profile-submit"  onclick="filterSales('<%= selectedStatus %>')">Refresh Report</button></div>
                              </div>
                            </div>
          
                      </div>
                  </div>
                  <div class="sales-tab  mt-2   bg-light">
                          <div class="d-flex justify-content-between align-items-center">
                             
                             
                      <form action="/admin/adminsales/download" method="post">
          
                              <% if (salesReport.length) { %>
                                  <div class="text-center my-2 px-4">
                                      <button type="submit" class="btn btn-dark px-2 form-control" id="sales-report-submit">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-download" viewBox="0 0 16 16">
                                              <path d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/>
                                              <path d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>
                                            </svg> Download
                                      </button>
                                  </div>
                              <% } %>
          
                          </div>
                          <div class="table-responsive">
                              <table class="table text-center table table-dark table-bordered table-striped ">
                                  <thead class="fs-6 " style="position: sticky;top: 0;">
                                      <tr class="border">
                                          <th scope="col" class="col-md-1" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Date</th>
                                          <th scope="col" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">OrderId</th>
                                          <!-- <th scope="col" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Consumer</th> -->
                                          <th scope="col" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Product</th>
                                          <th scope="col" class="col-md-1" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Quantity</th>
                                          <th scope="col" class="col-md-1" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Payment</th>
                                          <th scope="col" style="font-weight: 500;background-color: #83b99c;color: #E5E5E5;">Amount</th>
                                      </tr>
                                  </thead>
                                  <tbody>
              
                                      <% salesReport.forEach(sale=> { %>
                                          <tr>
                                              <td>
                                                  <%= sale.order_date.toLocaleDateString() %>
                                              </td>
                                              <input type="hidden" name="date" value="<%= sale.order_date.toLocaleDateString() %>">
                                              <td>
                                                  <%= sale._id %>
                                              </td>
                                              <input type="hidden" name="order_id" value="<%= sale.order_id %>">

                                              <td class="product-name" style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width: 100px;">
                                                  <%= sale.products_details.productName %>
                                              </td>
                                              <input type="hidden" name="product" value="<%= sale.products_details.productName %>">
                                              <td>
                                                  <%= sale.qty %>
                                              </td>
                                              <input type="hidden" name="qty" value="<%= sale.qty %>">
                                              <td>
                                                  <p class="text-success fw-medium ">
                                                      <%= sale.payment_method.split(' ').join('') %></p></td>
                                              <input type="hidden" name="payment" value="<%= sale.payment_method %>">
                                              <td><b>â‚¹<%= sale.total_amount * sale.qty %>/-</b></td>
                                              <input type="hidden" name="amount" value="<%= sale.total_amount * sale.qty %>">
                                          </tr>
                                      <% }) %>
                                  </tbody>
                              </table>
          
                          </div>
                      </form>
                  </div>
          
              </div>
        
              
        
            </div>
            
          </section>
        
        
        
          <script>

            function redirectToSelected() {
                const selectElement = document.getElementById("statusFilter");
                const selectedValue = selectElement.value;
            
                window.location.href = selectedValue;
            }
            
            
                function filterSales(status){
                const from=document.getElementById("start_date").value
                const to=document.getElementById("end_date").value
                window.location.href=`/admin/adminsales?from=${from}&to=${to}`
            }
              </script>
        
        
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
              crossorigin="anonymous"></script>
            <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
            <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
        
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JavaScript -->
    <script type="text/javascript" charset="utf8"
      src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        
    </div>

</body>

</html>